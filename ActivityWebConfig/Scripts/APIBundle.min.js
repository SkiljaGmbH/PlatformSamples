!function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function i(e,i,a,r,o,s){return t(n(t(t(i,e),t(r,s)),o),a)}function a(e,t,n,a,r,o,s){return i(t&n|~t&a,e,t,r,o,s)}function r(e,t,n,a,r,o,s){return i(t&a|n&~a,e,t,r,o,s)}function o(e,t,n,a,r,o,s){return i(t^n^a,e,t,r,o,s)}function s(e,t,n,a,r,o,s){return i(n^(t|~a),e,t,r,o,s)}function l(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var i,l,u,c,_,f=1732584193,p=-271733879,m=-1732584194,y=271733878;for(i=0;i<e.length;i+=16)l=f,u=p,c=m,_=y,f=a(f,p,m,y,e[i],7,-680876936),y=a(y,f,p,m,e[i+1],12,-389564586),m=a(m,y,f,p,e[i+2],17,606105819),p=a(p,m,y,f,e[i+3],22,-1044525330),f=a(f,p,m,y,e[i+4],7,-176418897),y=a(y,f,p,m,e[i+5],12,1200080426),m=a(m,y,f,p,e[i+6],17,-1473231341),p=a(p,m,y,f,e[i+7],22,-45705983),f=a(f,p,m,y,e[i+8],7,1770035416),y=a(y,f,p,m,e[i+9],12,-1958414417),m=a(m,y,f,p,e[i+10],17,-42063),p=a(p,m,y,f,e[i+11],22,-1990404162),f=a(f,p,m,y,e[i+12],7,1804603682),y=a(y,f,p,m,e[i+13],12,-40341101),m=a(m,y,f,p,e[i+14],17,-1502002290),p=a(p,m,y,f,e[i+15],22,1236535329),f=r(f,p,m,y,e[i+1],5,-165796510),y=r(y,f,p,m,e[i+6],9,-1069501632),m=r(m,y,f,p,e[i+11],14,643717713),p=r(p,m,y,f,e[i],20,-373897302),f=r(f,p,m,y,e[i+5],5,-701558691),y=r(y,f,p,m,e[i+10],9,38016083),m=r(m,y,f,p,e[i+15],14,-660478335),p=r(p,m,y,f,e[i+4],20,-405537848),f=r(f,p,m,y,e[i+9],5,568446438),y=r(y,f,p,m,e[i+14],9,-1019803690),m=r(m,y,f,p,e[i+3],14,-187363961),p=r(p,m,y,f,e[i+8],20,1163531501),f=r(f,p,m,y,e[i+13],5,-1444681467),y=r(y,f,p,m,e[i+2],9,-51403784),m=r(m,y,f,p,e[i+7],14,1735328473),p=r(p,m,y,f,e[i+12],20,-1926607734),f=o(f,p,m,y,e[i+5],4,-378558),y=o(y,f,p,m,e[i+8],11,-2022574463),m=o(m,y,f,p,e[i+11],16,1839030562),p=o(p,m,y,f,e[i+14],23,-35309556),f=o(f,p,m,y,e[i+1],4,-1530992060),y=o(y,f,p,m,e[i+4],11,1272893353),m=o(m,y,f,p,e[i+7],16,-155497632),p=o(p,m,y,f,e[i+10],23,-1094730640),f=o(f,p,m,y,e[i+13],4,681279174),y=o(y,f,p,m,e[i],11,-358537222),m=o(m,y,f,p,e[i+3],16,-722521979),p=o(p,m,y,f,e[i+6],23,76029189),f=o(f,p,m,y,e[i+9],4,-640364487),y=o(y,f,p,m,e[i+12],11,-421815835),m=o(m,y,f,p,e[i+15],16,530742520),p=o(p,m,y,f,e[i+2],23,-995338651),f=s(f,p,m,y,e[i],6,-198630844),y=s(y,f,p,m,e[i+7],10,1126891415),m=s(m,y,f,p,e[i+14],15,-1416354905),p=s(p,m,y,f,e[i+5],21,-57434055),f=s(f,p,m,y,e[i+12],6,1700485571),y=s(y,f,p,m,e[i+3],10,-1894986606),m=s(m,y,f,p,e[i+10],15,-1051523),p=s(p,m,y,f,e[i+1],21,-2054922799),f=s(f,p,m,y,e[i+8],6,1873313359),y=s(y,f,p,m,e[i+15],10,-30611744),m=s(m,y,f,p,e[i+6],15,-1560198380),p=s(p,m,y,f,e[i+13],21,1309151649),f=s(f,p,m,y,e[i+4],6,-145523070),y=s(y,f,p,m,e[i+11],10,-1120210379),m=s(m,y,f,p,e[i+2],15,718787259),p=s(p,m,y,f,e[i+9],21,-343485551),f=t(f,l),p=t(p,u),m=t(m,c),y=t(y,_);return[f,p,m,y]}function u(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function _(e){return u(l(c(e),8*e.length))}function f(e,t){var n,i,a=c(e),r=[],o=[];for(r[15]=o[15]=void 0,a.length>16&&(a=l(a,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^a[n],o[n]=1549556828^a[n];return i=l(r.concat(c(t)),512+8*t.length),u(l(o.concat(i),640))}function p(e){var t,n,i="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=i.charAt(t>>>4&15)+i.charAt(15&t);return a}function m(e){return unescape(encodeURIComponent(e))}function y(e){return _(m(e))}function d(e){return p(y(e))}function v(e,t){return f(m(e),m(t))}function h(e,t){return p(v(e,t))}function g(e,t,n){return t?n?v(t,e):h(t,e):n?y(e):d(e)}"function"==typeof define&&define.amd?define(function(){return g}):"object"==typeof module&&module.exports?module.exports=g:e.md5=g}(this);var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),STG;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.STGString=0]="STGString",e[e.STGDouble=1]="STGDouble",e[e.STGBoolean=2]="STGBoolean",e[e.STGInteger=3]="STGInteger",e[e.STGDateTime=4]="STGDateTime",e[e.STGDecimal=5]="STGDecimal",e[e.STGLong=6]="STGLong",e[e.STGShort=7]="STGShort",e[e.STGChar=8]="STGChar",e[e.STGDate=9]="STGDate"}(t=e.DtoSTGDataType||(e.DtoSTGDataType={}));var n=function(){function e(){this.IsNew=!0,this.IsSelected=!1}return e}();e.BaseEntity=n;var i=function(){function e(){}return e}();e.KeyValuePair=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoActivityConfigurationVariable=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoActivityConfiguration=r;var o=function(){function e(){}return e}();e.DtoMetadata=o;var s;!function(e){e[e.text=0]="text",e[e.number=1]="number",e[e.email=2]="email",e[e.date=3]="date",e[e.url=4]="url",e[e.password=5]="password",e[e.radio=6]="radio",e[e.checkbox=7]="checkbox",e[e.textarea=8]="textarea",e[e.colorpicker=9]="colorpicker",e[e.dictionary=10]="dictionary",e[e.enumeration=11]="enumeration",e[e.nestedClass=12]="nestedClass",e[e.file=13]="file",e[e.fieldPicker=14]="fieldPicker"}(s=e.InputTypeEnum||(e.InputTypeEnum={}));var l=function(){function e(){}return e}();e.Validation=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoVariableValue=u;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoVariable=c;var _;!function(e){e[e.Global=1]="Global",e[e.Client=2]="Client",e[e.Project=3]="Project",e[e.Process=4]="Process",e[e.Environment=5]="Environment"}(_=e.VariableValueLevel||(e.VariableValueLevel={}));var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoStoredFile=f;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoMediaTypeDefinition=p;var m=function(){function e(){}return e}();e.DTOMessageContent=m;var y;!function(e){e[e.Configuration=0]="Configuration",e[e.Acknowledge=1]="Acknowledge",e[e.ReturnData=2]="ReturnData",e[e.Error=3]="Error",e[e.Ready=4]="Ready",e[e.Ping=5]="Ping",e[e.Token=6]="Token"}(y=e.DtoMessageType||(e.DtoMessageType={}));var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoActivityInstanceInfo=d;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoSystemState=v;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoProcessInfo=h;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoDocumentTypeDefinition=g;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoStorageDefinition=b;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DtoTableDefinition=T}(t=e.Models||(e.Models={}))}(t=e.API||(e.API={}))}(STG||(STG={}));var STG;!function(e){var t;!function(e){var t=function(){function t(t,n){var i=this;if(this.ConfigLoadedCallback=t,this.SaveRequestedCallback=n,this.__platformOrigin__="",this.__messageSource__="",this.__availableVariables__=[],this.__availableDocumentTypes__=[],this.__availableMediaTypes__=[],this.__activityInstanceOwner__=null,this.__systemState__=null,this.GetDesigntimeServiceUrl=function(){return i.__systemState__&&i.__systemState__.DTServiceUrl&&i.__systemState__.DTServiceUrl.length>0?i.__systemState__.DTServiceUrl:""},this.GetPlatformVersion=function(){return i.__systemState__&&i.__systemState__.PlatformVersion&&i.__systemState__.PlatformVersion.length>0?i.__systemState__.PlatformVersion:"unknown"},this.GetAuthToken=function(){return i.__systemState__&&i.__systemState__.AuthToken&&i.__systemState__.AuthToken.length>0?i.__systemState__.AuthToken:void 0},this.GetAvailableVariables=function(e){if(void 0==e)return i.__availableVariables__;for(var t=new Array,n=0;n<i.__availableVariables__.length;n++){var a=i.__availableVariables__[n];a.Variable.Type==e&&t.push(a)}return t},this.AssignVariableByName=function(e,t){for(var n=null,a=0;a<i.__availableVariables__.length;a++){var r=i.__availableVariables__[a];if(r.Variable.Name==t){n=r;break}}return!!n&&i.AssignVariable(e,n)},this.RemoveVariableAssignement=function(e){for(var t=!1,n=0;n<i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables.length;n++)if(i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables[n].Key==e){i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables.splice(n,1),t=!0;break}return t},this.GetAvailableMediaTypes=function(){var e=[];return i.__availableMediaTypes__.length>0&&i.__availableMediaTypes__.forEach(function(t){t.IsSystem||e.push(t.Name)}),e},this.GetMediaTypeByName=function(e){for(var t=null,n=0;n<i.__availableMediaTypes__.length;n++)if(i.__availableMediaTypes__[n].Name.toLocaleUpperCase()==e.toLocaleUpperCase()){t=i.__availableMediaTypes__[n];break}return t},this.GetDocumentTypeByName=function(e){for(var t=null,n=0;n<i.__availableDocumentTypes__.length;n++)if(i.__availableDocumentTypes__[n].Name.toLocaleUpperCase()==e.toLocaleUpperCase()){t=i.__availableDocumentTypes__[n];break}return t},this.GetFieldByName=function(e,t){var n=null,a=i.GetDocumentTypeByName(e);if(a&&a.FieldDefinitions)for(var r=0;r<a.FieldDefinitions.length;r++)if(a.FieldDefinitions[r].Name.toLocaleUpperCase()==t.toLocaleUpperCase()){n=a.FieldDefinitions[r];break}return n},this.GetTableByName=function(e,t){var n=null,a=i.GetDocumentTypeByName(e);if(a&&a.TableDefinitions)for(var r=0;r<a.TableDefinitions.length;r++)if(a.TableDefinitions[r].Name.toLocaleUpperCase()==t.toLocaleUpperCase()){n=a.TableDefinitions[r];break}return n},this.GetColumnByName=function(e,t,n){var a=null,r=i.GetTableByName(e,t);if(r&&r.ColumnDefinitions)for(var o=0;o<r.ColumnDefinitions.length;o++)if(r.ColumnDefinitions[o].Name.toLocaleUpperCase()==n.toLocaleUpperCase()){a=r.ColumnDefinitions[o];break}return a},this.GetActivityInstance=function(){return i.__activityInstanceOwner__},this.GetProcessOwner=function(){return i.__activityInstanceOwner__?i.__activityInstanceOwner__.Process:null},this.GetAvailableDocumentTypes=function(){var e=[];return i.__availableDocumentTypes__.length>0&&i.__availableDocumentTypes__.forEach(function(t){e.push(t.Name)}),e},this.AddDocumentType=function(e,t){var n=i.GetDocumentTypeByName(e);if(n)return!1;var a={ID:0,Name:e,Description:t,ProcessOnly:!0,IsNew:!0,FieldDefinitions:[],TableDefinitions:[],dtoUrl:null,parentDtoUrl:null,IsSelected:!1,Metadata:[],VariableValues:[],TypeIdentifier:null};return i.__availableDocumentTypes__.push(a),!0},this.GetAvailableFieldsForDocumentType=function(e){var t=[],n=i.GetDocumentTypeByName(e);return n&&n.FieldDefinitions&&n.FieldDefinitions.length>0&&n.FieldDefinitions.forEach(function(e){var n={ID:e.ID,Name:e.Name,FieldType:e.FieldType,IsIndexed:e.IsIndexed};t.push(n)}),t},this.AddField=function(e,t,n,a){var r=i.GetDocumentTypeByName(e);if(r&&r.FieldDefinitions){var o={ID:0,Name:t,FieldType:n,IsIndexed:a,IsNew:!0,IsSelected:!1,Metadata:null,Reserved:!1,ReservedBy:null,TypeIdentifier:null,VariableValues:null,dtoUrl:null,parentDtoUrl:null};return r.FieldDefinitions.push(o),!0}return!1},this.UpdateField=function(e,t,n,a,r){var o=i.GetFieldByName(e,t);return!!o&&(o.Name=n,o.FieldType=a,o.IsIndexed=r,!0)},this.DeleteField=function(e,t){var n=i.GetDocumentTypeByName(e);if(n&&n.FieldDefinitions&&n.FieldDefinitions.length>0)for(var a=0;a<n.FieldDefinitions.length;a++){var r=n.FieldDefinitions[a];if(r.Name.toLocaleLowerCase()==t.toLocaleLowerCase())return n.FieldDefinitions.splice(a,1),!0}return!1},this.GetAvailableTablesForDocumentType=function(e){var t=[],n=i.GetDocumentTypeByName(e);return n&&n.TableDefinitions&&n.TableDefinitions.length>0&&n.TableDefinitions.forEach(function(e){var n={ID:e.ID,Name:e.Name,Description:e.Description,ColumnDefinitions:[]};t.push(n)}),t},this.AddTable=function(e,t,n){var a=i.GetDocumentTypeByName(e);if(a&&a.TableDefinitions){var r={ID:0,Name:t,Description:n,ColumnDefinitions:[],IsNew:!0,IsSelected:!1,Metadata:null,TypeIdentifier:null,VariableValues:null,dtoUrl:null,parentDtoUrl:null};return a.TableDefinitions.push(r),!0}return!1},this.UpdateTable=function(e,t,n,a){var r=i.GetTableByName(e,t);return!!r&&(r.Name=n,r.Description=a,!0)},this.DeleteTable=function(e,t){var n=i.GetDocumentTypeByName(e);if(n&&n.TableDefinitions&&n.TableDefinitions.length>0)for(var a=0;a<n.TableDefinitions.length;a++){var r=n.TableDefinitions[a];if(r.Name.toLocaleLowerCase()==t.toLocaleLowerCase())return n.TableDefinitions.splice(a,1),!0}return!1},this.GetAvailableColumnsForTable=function(e,t){var n=[],a=i.GetTableByName(e,t);return a&&a.ColumnDefinitions&&a.ColumnDefinitions.length>0&&a.ColumnDefinitions.forEach(function(e){var t={ID:e.ID,Name:e.Name,FieldType:e.FieldType,IsIndexed:!1};n.push(t)}),n},this.AddColumn=function(e,t,n,a){var r=i.GetTableByName(e,t);if(r&&r.ColumnDefinitions){var o={ID:0,Name:n,FieldType:a,IsIndexed:!1,IsNew:!0,IsSelected:!1,Metadata:null,TypeIdentifier:null,VariableValues:null,dtoUrl:null,parentDtoUrl:null,Reserved:null,ReservedBy:null};return r.ColumnDefinitions.push(o),!0}return!1},this.UpdateColumn=function(e,t,n,a,r){var o=i.GetColumnByName(e,t,n);return!!o&&(o.Name=a,o.FieldType=r,!0)},this.DeleteColumn=function(e,t,n){var a=i.GetTableByName(e,t);if(a&&a.ColumnDefinitions&&a.ColumnDefinitions.length>0)for(var r=0;r<a.ColumnDefinitions.length;r++){var o=a.ColumnDefinitions[r];if(o.Name.toLocaleLowerCase()==n.toLocaleLowerCase())return a.ColumnDefinitions.splice(r,1),!0}return!1},this.AssignVariable=function(e,t){for(var n=0;n<i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables.length;n++)if(i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables[n].Key==e){i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables.splice(n,1);break}return i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables.push({Key:e,Value:t,$$hashKey:0}),!0},this.GetAssignedVariable=function(e){for(var t=null,n=0;n<i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables.length;n++)if(i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables[n].Key==e){for(var a=i.__activityConfig__.ActivityConfigurationVariable.PropertyVariables[n].Value,r=0;r<i.__availableVariables__.length;r++)if(i.__availableVariables__[r].Variable.Name==a.Variable.Name){t=i.__availableVariables__[r];break}if(null!=t)break}return t},this.PrintConfigJson=function(){var e=JSON.stringify(i.__activityConfig__.Configuration);return console.log(e),e},this.validateMessage=function(e){var t=!0,n=e.data;if(!n||void 0==n.MessageType)return console.log("no message or message is undefined"),!1;var a=e.origin+"/aid/"+i.__activityInstance__;return md5(a)!=n.Source?(console.log("message source does not matches the key "+a),!1):t},this.getParameterByName=function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},this.receiveMessage=function(t){if(!i.validateMessage(t))return void console.log("message validation failed "+JSON.stringify(t));i.__platformOrigin__||(i.__platformOrigin__=t.origin);var n=t.data;switch(i.__platform__=t.source,n.MessageType){case e.Models.DtoMessageType.Configuration:try{i.__activityConfig__=n.Content,i.__availableVariables__=n.Variables,n.DocumentTypes&&(i.__availableDocumentTypes__=n.DocumentTypes),n.MediaTypes&&(i.__availableMediaTypes__=n.MediaTypes),n.ActivityInstanceOwner&&(i.__activityInstanceOwner__=n.ActivityInstanceOwner),n.SystemState&&(i.__systemState__=n.SystemState),i.ConfigLoadedCallback(i.__activityConfig__.Configuration),i.postMessage(e.Models.DtoMessageType.Acknowledge)}catch(t){console.error("Failed to load config"+t.message),i.postErrorMessage(t.message)}break;case e.Models.DtoMessageType.ReturnData:try{var a=i.validateDocumentTypes(),r=i.SaveRequestedCallback(a);a.cancel?(console.log("user canceled saving"),a.reason&&alert(a.reason)):(i.__activityConfig__.Configuration=r,i.postMessage(e.Models.DtoMessageType.Configuration))}catch(t){console.error("Failed to return data"+t.message),i.postErrorMessage(t.message)}break;case e.Models.DtoMessageType.Ping:try{i.postMessage(e.Models.DtoMessageType.Ready)}catch(t){console.error("Failed to respond to ping"+t.message),i.postErrorMessage(t.message)}break;case e.Models.DtoMessageType.Token:try{i.__systemState__&&n&&n.Message&&n.Message.length>0&&(i.__systemState__.AuthToken=n.Message)}catch(t){console.error("Failed to respond to token refresh message"+t.message),i.postErrorMessage(t.message)}}},this.validateDocumentTypes=function(){for(var e={cancel:!1},t=[],n=0;n<i.__availableDocumentTypes__.length;n++){var a=i.__availableDocumentTypes__[n];if(t.indexOf(a.Name.toLocaleUpperCase())>-1){e.cancel=!0,e.reason="There are multiple document types with the same name ('"+a.Name+"'). The document type name must be unique.";break}t.push(a.Name.toLocaleUpperCase());for(var r=[],o=0;o<a.FieldDefinitions.length;o++){var s=a.FieldDefinitions[o];if(r.indexOf(s.Name.toLocaleUpperCase())>-1){e.cancel=!0,e.reason="There are multiple index fields types with the same name ('"+s.Name+"') in the document type '"+a.Name+"'. The index field name within a document type must be unique.";break}r.push(s.Name.toLocaleUpperCase())}if(e.cancel)break;for(var l=[],u=0;u<a.TableDefinitions.length;u++){var c=a.TableDefinitions[u];if(l.indexOf(c.Name.toLocaleUpperCase())>-1){e.cancel=!0,e.reason="There are multiple tables types with the same name ('"+c.Name+"') in the document type '"+a.Name+"'. The table name within a document type must be unique.";break}l.push(c.Name.toLocaleUpperCase());for(var _=[],f=0;f<c.ColumnDefinitions.length;f++){var p=c.ColumnDefinitions[f];if(_.indexOf(p.Name.toLocaleUpperCase())>-1){e.cancel=!0,e.reason="There are multiple columns with the same name ('"+p.Name+"') in the table '"+c.Name+"' of the document type '"+a.Name+"'. The column name within a table of a document type must be unique.";break}_.push(p.Name.toLocaleUpperCase())}if(e.cancel)break}if(e.cancel)break}return e},this.SaveSettings=function(t){i.__activityConfig__.Configuration=t,i.postMessage(e.Models.DtoMessageType.Configuration)},this.postErrorMessage=function(t){var n={Content:void 0,Message:t,MessageType:e.Models.DtoMessageType.Error,Source:i.__messageSource__};n&&i.__platform__.postMessage(n,i.__platformOrigin__)},this.postMessage=function(t){var n=void 0;switch(t){case e.Models.DtoMessageType.Acknowledge:n={Content:void 0,Variables:void 0,Message:"Settings Received",MessageType:t,Source:i.__messageSource__};break;case e.Models.DtoMessageType.Configuration:n={Content:i.__activityConfig__,Variables:void 0,Message:"Modified Data",MessageType:t,Source:i.__messageSource__,DocumentTypes:i.__availableDocumentTypes__};break;case e.Models.DtoMessageType.Ready:n={Content:void 0,Variables:void 0,Message:"Client Initialized",MessageType:t,Source:i.__messageSource__}}n&&i.__platform__.postMessage(n,i.__platformOrigin__)},this.__activityInstance__=+this.getParameterByName("ai"),!this.__messageSource__){var a=window.location,r=a.protocol+"//"+a.host+"/aid/"+this.__activityInstance__;this.__messageSource__=md5(r)}window.addEventListener("message",this.receiveMessage)}return t}();e.PlatformBridge=t}(t=e.API||(e.API={}))}(STG||(STG={}));
//# sourceMappingURL=APIBundle.min.js.map
